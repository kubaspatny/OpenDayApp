<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="#{localeBean.language}"
      xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">
<f:view locale="#{localeBean.locale}">
    <h:head>

        <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
        <meta name="viewport" content="width=device-width, initial-scale=1"/>

        <title>Open Days</title>

        <h:outputScript library="primefaces" name="jquery/jquery.js" target="head"/>
        <h:outputScript target="head">
            $ = jQuery;
        </h:outputScript>

        <h:outputScript name="js/bootstrap.js"/>
        <link href='http://fonts.googleapis.com/css?family=Roboto:400,100,300,500,700,900' rel='stylesheet' type='text/css'/>

    </h:head>
    <h:body>
        <h:outputStylesheet name="css/bootstrap.css" />
        <h:outputStylesheet name="css/logo.css" />
        <h:outputStylesheet name="css/main.css" />

        <nav class="navbar navbar-inverse navbar-fixed-top">
            <div class="container-fluid">
                <!-- Brand and toggle get grouped for better mobile display -->
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <h:link styleClass="navbar-brand logo-navbar" outcome="index">OPEN DAYS</h:link>
                </div>

                <!-- Collect the nav links, forms, and other content for toggling -->
                <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                    <ul class="nav navbar-nav navbar-right">
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><h:outputText value="#{userBB.name}"/><span class="caret"></span></a>
                            <ul class="dropdown-menu" role="menu">
                                <li><a href="#">Profile</a></li>
                                <li><a href="#">Settings</a></li>
                                <li class="divider"></li>
                                <li><h:outputLink value="#{root}/logout">Sign out</h:outputLink></li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>

        <div class="container">

            <div class="row">

                <div class="col-md-6">

                    <div class="material-container">

                        <div class="box-toolbar">
                            <span class="left title">EVENTS</span>
                            <h:form>
                                <h:commandLink class="right material-button-flat no-select" action="#{navBB.goCreateEvent}">NEW</h:commandLink>
                            </h:form>
                        </div>


                        <div class="box-content">

                            <h:form id="events">
                            <p:dataTable var="event" value="#{indexBB.events}" rendered="#{not empty indexBB.events}" styleClass="no-header">
                                <p:column styleClass="event-name">
                                    <h:commandLink value="#{event.name}" action="#{navBB.goEvent(event.id)}" />
                                </p:column>

                                <p:column styleClass="event-date">
                                    <h:outputText value="#{event.eventDate}" />
                                </p:column>

                                <p:column>
                                    <div class="right">

                                        <p:commandButton styleClass="material-button-image image-button-edit ui-button-icon-only no-select" action="#{indexBB.edit(event.name)}" value=""/>
                                        <p:commandButton styleClass="material-button-image image-button-delete ui-button-icon-only no-select"
                                                         actionListener="#{indexBB.deleteEvent(event.id)}" value="" update="@form">
                                            <p:confirm header="Confirmation" message="Do you really want to delete event?" icon="icon-empty"/>
                                        </p:commandButton>

                                        <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                                            <p:commandButton value="Yes" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check" />
                                            <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close" />
                                        </p:confirmDialog>
                                        <!--<p:commandLink action="">-->
                                            <!--<h:graphicImage name="images/edit18.png" styleClass="material-button-image"/>-->
                                        <!--</p:commandLink>-->

                                        <!--<p:commandLink action="">-->
                                            <!--<h:graphicImage name="images/delete18.png" styleClass="material-button-image margin-left-20"/>-->
                                        <!--</p:commandLink>-->
                                    </div>
                                </p:column>

                            </p:dataTable>

                            <h:panelGroup layout="block" styleClass="alert alert-info" rendered="#{empty indexBB.events and not indexBB.eventLoadingError}" >
                                <h:outputText value="#{strings['noevents']}"/>
                            </h:panelGroup>

                            <h:panelGroup layout="block" styleClass="alert alert-danger" rendered="#{indexBB.eventLoadingError}" >
                                <h:outputText value="#{strings['error-eventloading']}"/>
                            </h:panelGroup>

                            </h:form>

                        </div>

                    </div>
                </div>

                <div class="col-md-6">
                    <div class="material-container">
                        <p>This is text. This is text. This is text. This is text. This is text. This is text. This is text. This is text. This is text. This is text. This is text. This is text. This is text. This is text. This is text. This is text. This is text. This is text. This is text. This is text. This is text. This is text. This is text. This is text. This is text. This is text. This is text. This is text. This is text. This is text. This is text. This is text. This is text. This is text. </p>
                    </div>
                </div>

            </div>

            <h:form>
                <h1><h:outputText value="#{demoBB.text}"/></h1>
                <p:poll interval="1" listener="#{demoBB.update()}" update="@form"/>
            </h:form>

        </div>

    </h:body>
</f:view>
</html>